import{_ as r,c as a,b as n,a as s,e as i,d,w as l,r as g,o as u}from"./app-DFijetiu.js";const h="/assets/routing-A-B-C-1-B-__QP-0.png",o="/assets/routing-A-B-C-2-Bl8OBlbH.png",m="/assets/routing-A-B-C-3-DjbYtVHn.png",c={};function p(b,e){const t=g("RouteLink");return u(),a("div",null,[e[3]||(e[3]=n("h1",{id:"wie-kapazitat-und-liquiditat-das-routing-im-lightning-netzwerk-bestimmen",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#wie-kapazitat-und-liquiditat-das-routing-im-lightning-netzwerk-bestimmen"},[n("span",null,"Wie Kapazit√§t und Liquidit√§t das Routing im Lightning Netzwerk bestimmen")])],-1)),n("p",null,[e[1]||(e[1]=i("Lightning erm√∂glicht schnellere Transaktionen und geringere Geb√ºhren, die durch ein Netzwerk aus bidirektionalen Zahlungskan√§len m√∂glich werden. Im Artikel zum ",-1)),d(t,{to:"/anleitung/lightning-network-zahlungskanal/"},{default:l(()=>[...e[0]||(e[0]=[i("Lebenszyklus eines Zahlungskanals im Lightning Netzwerk",-1)])]),_:1}),e[2]||(e[2]=i(" erf√§hrst du, wie Zahlungen grunds√§tzlich funktionieren.",-1))]),e[4]||(e[4]=s('<p>√úber die Zahlungen innerhalb eines Kanals hinaus, kann man auch √ºber die Verbindungen der Kan√§le bezahlen: Routing erm√∂glicht Zahlungen an Parteien, mit denen man nicht direkt verbunden ist ‚Äî daher auch die Bezeichnung als Lightning Netzwerk.</p><p>So ist es auch m√∂glich, √ºber mehrere Knoten im Netzwerk hinweg jemanden anders zu bezahlen oder Geld zu empfangen. Dabei spielen jedoch zwei Faktoren eine entscheidende Rolle: Dieser Artikel erkl√§rt dir, wie das Routing von der <em>Kapazit√§t</em> und <em>Liquidit√§t</em> der Zahlungskan√§le bestimmt wird.</p><h2 id="definitionen" tabindex="-1"><a class="header-anchor" href="#definitionen"><span>Definitionen</span></a></h2><p><mark><strong>Kapazit√§t</strong> ist definiert als der Gesamtbetrag, den ein Zahlungskanal beinhaltet.</mark> Bei der Kanal√∂ffnung wird die Kapazit√§t festgelegt, danach ist sie fix und kann zumindest mit dem aktuellen Stand der Lightning-Implementierung nicht nachtr√§glich angepasst werden. Dieser Gesamtbetrag wird im Lightning Netzwerk in der Einheit Millisatoshi (msat) gef√ºhrt.</p><p>Mit der <strong>Verteilung</strong> wird beschrieben, wie der Gesamtbetrag unter den beiden Kanalpartnern aufgeteilt ist. Diese Verteilung betrifft auch die <strong>Liquidit√§t</strong>, da wir zwischen <em>eingehender und ausgehender Liquidit√§t</em> unterscheiden m√ºssen.</p><p>Aus der Perspektive des Benutzers ist die <mark><strong>eingehende Liquidit√§t</strong> der Betrag auf der anderen Seite des Kanals ‚Äî also der Teil des Geldes, den man vom Gegen√ºber empfangen kann.</mark> Um ein Beispiel zu nennen: Verk√§ufer ben√∂tigen prim√§r eingehende Liquidit√§t, um Geld von ihren Kunden empfangen zu k√∂nnen.</p><p>Als das exakte Gegenst√ºck dazu ist die <mark><strong>ausgehende Liquidit√§t</strong> der Betrag auf der eigenen Seite des Kanals ‚Äî also der Teil des Geldes, den man selbst versenden kann.</mark> Als normaler Nutzer oder Kunde ben√∂tigt man vorwiegend ausgehende Liquidit√§t, um Zahlungen zu machen und Eink√§ufe zu erledigen.</p><p><strong>Routing</strong> beschreibt den Prozess einen Pfad f√ºr die Zahlung √ºber Kanalgrenzen hinweg zu finden. Dieses Pfadfinden wird durch die <em>Kapazit√§t</em> und <em>Liquidit√§t</em> aller Kan√§le/Zwischenschritte auf dem Weg bestimmt, wobei die generelle Aussage gilt: Je l√§nger der Pfad (also je h√∂her die Anzahl der Zwischenschritte) ist, desto eingeschr√§nkter sind die M√∂glichkeiten, die sich f√ºr ein erfolgreiches Routing ergeben.</p><div class="hint-container tip"><p class="hint-container-title">Hinweis</p><p>Hash Time-Locked Contracts (kurz: HTLC) werden verwendet, um das Geld auf dem Weg zu sichern. Sie stellen sicher, dass das Geld auf dem Weg zum Zahlungsempf√§nger nicht gestohlen wird. Die Knotenpunkte entlang der Route k√∂nnen Geb√ºhren als Provision f√ºr ihre Dienstleistung erheben. Diese Geb√ºhren sind auch im HTLC enthalten, die jeder Knoten auf dem Weg empf√§ngt und weitergibt.</p></div><h2 id="einschrankungen-fur-das-routing" tabindex="-1"><a class="header-anchor" href="#einschrankungen-fur-das-routing"><span>Einschr√§nkungen f√ºr das Routing</span></a></h2><p>Nach diese Definitionen gekl√§rt sind, kann auch eine Analogie helfen, um einen weiteren wichtigen Punkt beim Verschieben des Geldes zu verstehen: <mark>Stell dir die Kapazit√§t in einem Zahlungskanal als Perlen auf einer Schnur vor.</mark> Oder f√ºr die √Ñlteren unter uns: wie Perlen in einem Abakus. ¬†üßÆ<br> Sie k√∂nnen von einer Seite zur anderen wandern, aber sie verlassen die Schnur nicht, <em>selbst wenn sie weitergeleitet werden</em>.</p><p>Die Anzahl der Perlen ist festgelegt (Kapazit√§t), und die Seite auf der sie sich befinden (Verteilung), symbolisiert entweder die eingehende oder die ausgehende Liquidit√§t.</p><p>Genug der trockenen Theorie, werfen wir einen Blick auf ein praktisches Beispiel: Das folgende Diagramm zeigt einen Fall, in dem Alice (<strong>A</strong>) an Charlie (<strong>C</strong>) einen Betrag von 4 mBTC zahlen m√∂chte (4 Milli-Bitcoin, also 4 Millionen Sats ‚Äî die Einheit f√ºr die Beispiele ist willk√ºrlich).</p><p>Das Guthaben ihres eigenen Kanals mit Charlie reicht nicht aus: Sie hat nur eine ausgehende Liquidit√§t von 2 (rote Linie). Ihr Kanal mit Bob (<strong>B</strong>) hat jedoch eine ausgehende Liquidit√§t von 6, so dass die Zahlung diesen Weg einschlagen kann (gestrichelte gr√ºne Linie).</p><p><img src="'+h+'" alt="Alice muss √ºber Bob routen, um 4 mBTC an Charlie zu senden."></p><p>Alice muss √ºber Bob routen, um 4 mBTC an Charlie zu senden. Sie erstellt also eine Verbindlichkeitstransaktion mit einer HTLC, die Charlie den Betrag von 4 mBTC gew√§hrt. Alice sendet diese an Bob, damit er sie weitergeben kann.</p><p>Zu diesem Zeitpunkt k√∂nnte die Zahlung immer noch scheitern: N√§mlich in dem Fall, dass Bobs ausgehende Kapazit√§t zu Charlie nicht ausreichen w√ºrde (gestrichelte graue Linie).</p><p>Was die meisten Menschen in ihrem Verst√§ndnis st√∂rt: Bob kann die 4 mBTC, die er von Alice erhalten hat, nicht nehmen und sie in seinen Kanal mit Charlie verschieben und weitergeben. <mark>Der Betrag kann nicht direkt den Kanal wechseln, da die Kapazit√§t eines jeden Kanals festgelegt ist.</mark> Die Weiterleitung funktioniert nur, wenn Bob&#39;s ausgehende Kapazit√§t in seinem Kanal mit Charlie auch mindestens 4 mBTC betr√§gt ‚Ä¶</p><h2 id="anderung-der-verteilung" tabindex="-1"><a class="header-anchor" href="#anderung-der-verteilung"><span>√Ñnderung der Verteilung</span></a></h2><p>Alice hat Gl√ºck, denn Bob hat eine ausgehende Kapazit√§t von 5 mBTC in seinem Kanal mit Charlie. Die Zahlung wird weitergeleitet, wie in der folgenden Abfolge von Diagrammen zu sehen ist.</p><p><img src="'+o+'" alt="Alice zahlt Bob 4 mBTC (gr√ºne Linie) und Bob zahlt Charlie 4 mBTC (gestrichelte gr√ºne Linie)."></p><p>Alice zahlt Bob 4 mBTC (gr√ºne Linie) und Bob zahlt Charlie 4 mBTC (gestrichelte gr√ºne Linie).</p><p>So sieht die Verteilung aus, nachdem die Weiterleitung erfolgreich durchgef√ºhrt wurde:</p><p><img src="'+m+'" alt="Alice&#39;s Weiterleitung √ºber Bob hat die Verteilung zwischen Bob und Charlie angepasst."></p><p>Alice&#39;s Weiterleitung √ºber Bob hat die Verteilung zwischen Bob und Charlie angepasst.</p><div class="hint-container tip"><p class="hint-container-title">Hinweis</p><p>Aufgrund der HTLCs sind die Routing-Operationen atomar. Das bedeutet, dass entweder die gesamte Weiterleitung erfolgreich ist oder nichts passiert. Um eine verst√§ndlichere Erkl√§rung zu geben, zeigen die Diagramme jedoch einen schrittweisen Weg der √úbertragung.</p></div><p>Wie wir sehen k√∂nnen, hat die Weiterleitung der Zahlung von Alice an Charlie √ºber Bob die Salden aller Kan√§le auf dem Weg ver√§ndert:</p><ul><li>A-B √§nderte sich von 6-4 zu 2-8</li><li>B-C √§nderte sich von 5-5 zu 1-9</li></ul><p>Dies ist insbesondere f√ºr eine weitere Art von Akteuren im Netzwerk von Bedeutung: Die Betreiber von Routingknoten m√ºssen ihre Kan√§le fortw√§hrend ausbalancieren, um die richtige Art von Liquidit√§t f√ºr den jeweiligen Geldfluss zu gew√§hrleisten.</p><p>Um diese Punkte kurz zusammenzufassen, k√∂nnte man sagen:</p><ul><li>H√§ndler brauchen eingehende Liquidit√§t.</li><li>Kunden ben√∂tigen ausgehende Liquidit√§t.</li><li>Routingkonten-Betreiber m√ºssen die Verteilungen f√ºr die Geldstr√∂me anpassen.</li></ul><p>Diese Punkte sind derzeit ein gro√ües Thema beim Aufbau der Kan√§le eines neuen Lightning-Knotens: Da Kanalkapazit√§t und Liquidit√§t die einschr√§nkenden Faktoren sind, gibt es Dienste, die auf die Bed√ºrfnisse von H√§ndlern eingehen: Der Kanal√∂ffnungsdienst <a href="https://www.bitrefill.com/thor-lightning-network-channels/" target="_blank" rel="noopener noreferrer">Thor von Bitrefill</a> war meines Wissens nach der erste und wurde schnell von <a href="https://blog.lightning.engineering/posts/2019/03/20/loop.html" target="_blank" rel="noopener noreferrer">Lightning Labs&#39; Loop</a> gefolgt.</p><h2 id="zukunftige-entwicklung" tabindex="-1"><a class="header-anchor" href="#zukunftige-entwicklung"><span>Zuk√ºnftige Entwicklung</span></a></h2><p>Aber nicht nur H√§ndler sind auf eingehende Liquidit√§t angewiesen. Wie wir gesehen haben, sto√üen die Kunden aufgrund der L√§nge ihres Zahlungsweges an Grenzen.</p><p>Um dies zu beheben, wird bereits an L√∂sungen wie <a href="https://lightning.engineering/posts/2020-05-07-mpp/" target="_blank" rel="noopener noreferrer">Multi-Path Payments</a> gearbeitet: Statt √ºber eine einzige Route zu gehen, kann der gesendete Betrag aufgeteilt werden und mehrere verschiedene Routen nehmen. Auf diese Weise werden gr√∂√üere Zahlungen erm√∂glicht, da die Kapazit√§t und die Verteiliung mehrerer Kan√§le ber√ºcksichtigt werden k√∂nnen. Ein Beispiel: Mit MPP k√∂nnte die Zahlung von Alice an Charlie so aufgeteilt werden, dass 2 mBTC √ºber Bob gehen und die anderen 2 mBTC √ºber einen anderen Knoten <strong>D</strong> als Zwischenschritt.</p><p>Dies ist nur eines von vielen spannenden Features, die derzeit ihren Weg in die Lightning Network Spezifikation finden. üòÄ</p>',36))])}const f=r(c,[["render",p]]),w=JSON.parse('{"path":"/anleitung/lightning-network-routing/","title":"Wie Kapazit√§t und Liquidit√§t das Routing im Lightning Netzwerk bestimmen","lang":"de-DE","frontmatter":{"image":"/assets/zahlungskanal-lebenszyklus.b54c6ebc.png","description":"Wie Kapazit√§t und Liquidit√§t das Routing im Lightning Netzwerk bestimmen Lightning erm√∂glicht schnellere Transaktionen und geringere Geb√ºhren, die durch ein Netzwerk aus bidirek...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Wie Kapazit√§t und Liquidit√§t das Routing im Lightning Netzwerk bestimmen\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Dennis\\",\\"url\\":\\"https://d11n.net\\",\\"email\\":\\"mail@d11n.net\\"}]}"],["meta",{"property":"og:url","content":"https://hey-bitcoin.de/anleitung/lightning-network-routing/"}],["meta",{"property":"og:site_name","content":"Hey Bitcoin!"}],["meta",{"property":"og:title","content":"Wie Kapazit√§t und Liquidit√§t das Routing im Lightning Netzwerk bestimmen"}],["meta",{"property":"og:description","content":"Wie Kapazit√§t und Liquidit√§t das Routing im Lightning Netzwerk bestimmen Lightning erm√∂glicht schnellere Transaktionen und geringere Geb√ºhren, die durch ein Netzwerk aus bidirek..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"de-DE"}]]},"git":{"contributors":[{"name":"Dennis Reimann","username":"","email":"mail@dennisreimann.de","commits":2}],"changelog":[{"hash":"9bae39fe00364d718cc1935ec609bda4633fd8fa","time":1673261595000,"email":"mail@dennisreimann.de","author":"Dennis Reimann","message":"Add article images"},{"hash":"de8c5f61a80e128267fa00cf120b3a7f15692c81","time":1657095499000,"email":"mail@dennisreimann.de","author":"Dennis Reimann","message":"Add Lightning Network Routing"}]},"filePathRelative":"anleitung/lightning-network-routing/README.md","autoDesc":true}');export{f as comp,w as data};
